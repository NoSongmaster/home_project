
<!DOCTYPE html>
<html lang="en" class="no-js">

    <head>

        <meta charset="utf-8">
        <title>主机管理平台 Login</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- CSS -->
        <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=PT+Sans:400,700'>
        <link rel="stylesheet" href="/static/assets/css/reset.css">
        <link rel="stylesheet" href="/static/assets/css/supersized.css">
        <link rel="stylesheet" href="/static/assets/css/style.css">


    </head>

    <body>

        <div class="page-container">
            <h1 style="color: darkkhaki;padding: 2px">主机管理平台</h1>
{#            <form action="" method="post">#}
                <P><input type="text" name="username" class="username" placeholder="Username" id="user"></P>
                <P><input type="password" name="password" class="password" placeholder="Password" id="pwd"></P>
                <P><button type="submit" id="btn">Sign me in</button></P>
                <div class="error"><span>+</span></div>
{#            </form>#}
            <div class="connect">
                <p>Or connect with:</p>
                <p>
                    <a class="facebook" href=""></a>
                    <a class="twitter" href=""></a>
                </p>
            </div>
        </div>
        <!-- Javascript -->
        <script src="/static/assets/js/jquery-1.8.2.min.js"></script>
        <script src="/static/assets/js/supersized.3.2.7.min.js"></script>
        <script src="/static/assets/js/supersized-init.js"></script>
        <script src="/static/assets/js/scripts.js"></script>
    </body>
<script>
{# 当程序执行到这里，会执行binBtn()#}
    $(function () {
        binBtn();
        console.log(1111111)
    });
    function binBtn() {
{#        当#btn被点击的时候执行#}
        $('#btn').click(function () {
            var u =$('#user').val();
            var p=$('#pwd').val();
{#            发送一个ajax请求#}
            $.ajax({
{#<--       请求发送的位置url  请求类型 type 发送的数据 data  服务端返回数据，会自动执行sucess：执行一个函数(回调函数)#}
                url:'/login',
                type:'POST',
                data:{user:u,pwd:p},
                success:function (data) {
{#              将json格式的字符串转化为字典#}
                    var data_dict=JSON.parse(data)
                    console.log(data_dict)
                    if(data_dict.status){
                        location.href='/home'
                    }else{
                        console.log(data_dict.error)
                        alert(data_dict.error)
                    }

                }

            })

        })
    }
</script>

</html>

